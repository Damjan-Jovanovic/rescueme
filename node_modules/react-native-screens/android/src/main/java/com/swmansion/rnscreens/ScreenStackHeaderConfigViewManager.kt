package com.swmansion.rnscreens

<<<<<<< HEAD
import android.util.Log
=======
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
import android.view.View
import com.facebook.react.bridge.JSApplicationCausedNativeException
import com.facebook.react.common.MapBuilder
import com.facebook.react.module.annotations.ReactModule
import com.facebook.react.uimanager.ThemedReactContext
import com.facebook.react.uimanager.ViewGroupManager
<<<<<<< HEAD
import com.facebook.react.uimanager.ViewManagerDelegate
import com.facebook.react.uimanager.annotations.ReactProp
import com.facebook.react.viewmanagers.RNSScreenStackHeaderConfigManagerDelegate
import com.facebook.react.viewmanagers.RNSScreenStackHeaderConfigManagerInterface
import javax.annotation.Nonnull

@ReactModule(name = ScreenStackHeaderConfigViewManager.REACT_CLASS)
class ScreenStackHeaderConfigViewManager : ViewGroupManager<ScreenStackHeaderConfig>(), RNSScreenStackHeaderConfigManagerInterface<ScreenStackHeaderConfig> {
    private val mDelegate: ViewManagerDelegate<ScreenStackHeaderConfig>

    init {
        mDelegate = RNSScreenStackHeaderConfigManagerDelegate<ScreenStackHeaderConfig, ScreenStackHeaderConfigViewManager>(this)
    }

=======
import com.facebook.react.uimanager.annotations.ReactProp
import javax.annotation.Nonnull

@ReactModule(name = ScreenStackHeaderConfigViewManager.REACT_CLASS)
class ScreenStackHeaderConfigViewManager : ViewGroupManager<ScreenStackHeaderConfig>() {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
    override fun getName(): String {
        return REACT_CLASS
    }

    override fun createViewInstance(reactContext: ThemedReactContext): ScreenStackHeaderConfig {
        return ScreenStackHeaderConfig(reactContext)
    }

    override fun addView(parent: ScreenStackHeaderConfig, child: View, index: Int) {
        if (child !is ScreenStackHeaderSubview) {
            throw JSApplicationCausedNativeException(
                "Config children should be of type " + ScreenStackHeaderSubviewManager.REACT_CLASS
            )
        }
        parent.addConfigSubview(child, index)
    }

    override fun onDropViewInstance(@Nonnull view: ScreenStackHeaderConfig) {
        view.destroy()
    }

    override fun removeAllViews(parent: ScreenStackHeaderConfig) {
        parent.removeAllConfigSubviews()
    }

    override fun removeViewAt(parent: ScreenStackHeaderConfig, index: Int) {
        parent.removeConfigSubview(index)
    }

    override fun getChildCount(parent: ScreenStackHeaderConfig): Int {
        return parent.configSubviewsCount
    }

    override fun getChildAt(parent: ScreenStackHeaderConfig, index: Int): View {
        return parent.getConfigSubview(index)
    }

    override fun needsCustomLayoutForChildren(): Boolean {
        return true
    }

    override fun onAfterUpdateTransaction(parent: ScreenStackHeaderConfig) {
        super.onAfterUpdateTransaction(parent)
        parent.onUpdate()
    }

    @ReactProp(name = "title")
<<<<<<< HEAD
    override fun setTitle(config: ScreenStackHeaderConfig, title: String?) {
=======
    fun setTitle(config: ScreenStackHeaderConfig, title: String?) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setTitle(title)
    }

    @ReactProp(name = "titleFontFamily")
<<<<<<< HEAD
    override fun setTitleFontFamily(config: ScreenStackHeaderConfig, titleFontFamily: String?) {
=======
    fun setTitleFontFamily(config: ScreenStackHeaderConfig, titleFontFamily: String?) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setTitleFontFamily(titleFontFamily)
    }

    @ReactProp(name = "titleFontSize")
<<<<<<< HEAD
    override fun setTitleFontSize(config: ScreenStackHeaderConfig, titleFontSize: Int) {
        config.setTitleFontSize(titleFontSize.toFloat())
    }

    @ReactProp(name = "titleFontWeight")
    override fun setTitleFontWeight(config: ScreenStackHeaderConfig, titleFontWeight: String?) {
=======
    fun setTitleFontSize(config: ScreenStackHeaderConfig, titleFontSize: Float) {
        config.setTitleFontSize(titleFontSize)
    }

    @ReactProp(name = "titleFontWeight")
    fun setTitleFontWeight(config: ScreenStackHeaderConfig, titleFontWeight: String?) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setTitleFontWeight(titleFontWeight)
    }

    @ReactProp(name = "titleColor", customType = "Color")
<<<<<<< HEAD
    override fun setTitleColor(config: ScreenStackHeaderConfig, titleColor: Int?) {
        if (titleColor != null) {
            config.setTitleColor(titleColor)
        }
    }

    @ReactProp(name = "backgroundColor", customType = "Color")
    override fun setBackgroundColor(config: ScreenStackHeaderConfig, backgroundColor: Int?) {
=======
    fun setTitleColor(config: ScreenStackHeaderConfig, titleColor: Int) {
        config.setTitleColor(titleColor)
    }

    @ReactProp(name = "backgroundColor", customType = "Color")
    fun setBackgroundColor(config: ScreenStackHeaderConfig, backgroundColor: Int?) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setBackgroundColor(backgroundColor)
    }

    @ReactProp(name = "hideShadow")
<<<<<<< HEAD
    override fun setHideShadow(config: ScreenStackHeaderConfig, hideShadow: Boolean) {
=======
    fun setHideShadow(config: ScreenStackHeaderConfig, hideShadow: Boolean) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setHideShadow(hideShadow)
    }

    @ReactProp(name = "hideBackButton")
<<<<<<< HEAD
    override fun setHideBackButton(config: ScreenStackHeaderConfig, hideBackButton: Boolean) {
=======
    fun setHideBackButton(config: ScreenStackHeaderConfig, hideBackButton: Boolean) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setHideBackButton(hideBackButton)
    }

    @ReactProp(name = "topInsetEnabled")
<<<<<<< HEAD
    override fun setTopInsetEnabled(config: ScreenStackHeaderConfig, topInsetEnabled: Boolean) {
=======
    fun setTopInsetEnabled(config: ScreenStackHeaderConfig, topInsetEnabled: Boolean) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setTopInsetEnabled(topInsetEnabled)
    }

    @ReactProp(name = "color", customType = "Color")
<<<<<<< HEAD
    override fun setColor(config: ScreenStackHeaderConfig, color: Int?) {
        config.setTintColor(color ?: 0)
    }

    @ReactProp(name = "hidden")
    override fun setHidden(config: ScreenStackHeaderConfig, hidden: Boolean) {
=======
    fun setColor(config: ScreenStackHeaderConfig, color: Int) {
        config.setTintColor(color)
    }

    @ReactProp(name = "hidden")
    fun setHidden(config: ScreenStackHeaderConfig, hidden: Boolean) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setHidden(hidden)
    }

    @ReactProp(name = "translucent")
<<<<<<< HEAD
    override fun setTranslucent(config: ScreenStackHeaderConfig, translucent: Boolean) {
=======
    fun setTranslucent(config: ScreenStackHeaderConfig, translucent: Boolean) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setTranslucent(translucent)
    }

    @ReactProp(name = "backButtonInCustomView")
<<<<<<< HEAD
    override fun setBackButtonInCustomView(
=======
    fun setBackButtonInCustomView(
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config: ScreenStackHeaderConfig,
        backButtonInCustomView: Boolean
    ) {
        config.setBackButtonInCustomView(backButtonInCustomView)
    }

    @ReactProp(name = "direction")
<<<<<<< HEAD
    override fun setDirection(config: ScreenStackHeaderConfig, direction: String?) {
=======
    fun setDirection(config: ScreenStackHeaderConfig, direction: String?) {
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
        config.setDirection(direction)
    }

    override fun getExportedCustomDirectEventTypeConstants(): Map<String, Any>? {
        return MapBuilder.builder<String, Any>()
            .put("onAttached", MapBuilder.of("registrationName", "onAttached"))
            .put("onDetached", MapBuilder.of("registrationName", "onDetached"))
            .build()
    }

<<<<<<< HEAD
    protected override fun getDelegate(): ViewManagerDelegate<ScreenStackHeaderConfig> {
        return mDelegate
    }

    companion object {
        const val REACT_CLASS = "RNSScreenStackHeaderConfig"
    }

    // TODO: Find better way to handle platform specific props
    private fun logNotAvailable(propName: String) {
        Log.w("RN SCREENS", "$propName prop is not available on Android")
    }

    override fun setBackTitle(view: ScreenStackHeaderConfig?, value: String?) {
        logNotAvailable("backTitle")
    }

    override fun setBackTitleFontFamily(view: ScreenStackHeaderConfig?, value: String?) {
        logNotAvailable("backTitleFontFamily")
    }

    override fun setBackTitleFontSize(view: ScreenStackHeaderConfig?, value: Int) {
        logNotAvailable("backTitleFontSize")
    }

    override fun setLargeTitle(view: ScreenStackHeaderConfig?, value: Boolean) {
        logNotAvailable("largeTitle")
    }

    override fun setLargeTitleFontFamily(view: ScreenStackHeaderConfig?, value: String?) {
        logNotAvailable("largeTitleFontFamily")
    }

    override fun setLargeTitleFontSize(view: ScreenStackHeaderConfig?, value: Int) {
        logNotAvailable("largeTitleFontSize")
    }

    override fun setLargeTitleFontWeight(view: ScreenStackHeaderConfig?, value: String?) {
        logNotAvailable("largeTitleFontWeight")
    }

    override fun setLargeTitleBackgroundColor(view: ScreenStackHeaderConfig?, value: Int?) {
        logNotAvailable("largeTitleBackgroundColor")
    }

    override fun setLargeTitleHideShadow(view: ScreenStackHeaderConfig?, value: Boolean) {
        logNotAvailable("largeTitleHideShadow")
    }

    override fun setLargeTitleColor(view: ScreenStackHeaderConfig?, value: Int?) {
        logNotAvailable("largeTitleColor")
    }

    override fun setDisableBackButtonMenu(view: ScreenStackHeaderConfig?, value: Boolean) {
        logNotAvailable("disableBackButtonMenu")
    }
=======
    companion object {
        const val REACT_CLASS = "RNSScreenStackHeaderConfig"
    }
>>>>>>> 150527d27ff0a3db86f4b23e3ac848fd48c52064
}
